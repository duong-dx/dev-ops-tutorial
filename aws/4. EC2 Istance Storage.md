1. EBS
- EBS: (Elastic Block Store) Volume is a network drive you can attach to you instance while they run
  Elastic Block Store là một ổ đĩa mạng chúng ta có thể đính kèm với instance trong khi chúng chạy
- It allow your instances to persist data, even after their terminated: Nó cho phép dữ liệu của bạn tồn tại, thậm chí cả khi instance đã bị chấm dứt
- They can only be mounted to one instance at a time (at the CCP level): Chúng ta chỉ có thể gắn kết nó với 1 instance trong 1 thời điểm
- They are bound to specific Availability Zone: EBS chỉ khả dụng trên 1 AZ duy nhất
- Free tier: 30GB of free EBS storage of type General Purpose(SSD) or Magnetic/month
- It's a network drive (not a physic drive)
- It uses the network to communicate the instance, which mean there might be a bit of latency
  Nó sử dụng mạng để giao tiếp với instance, do đó có thể có chút độ trễ
- It can be detached from an EC2 instance, and attached to another one quickly:
  Nó có thể tách ra từ EC2 instance và đính vào EC2 instance rất nhanh
- It's Locked to an Availability Zone
  - eg. An EBS volume in ap-southeast-1, a cannot be attached to ap-southeast-2
  - To move a volume across from AZ to AZ, you first need snapshot it: Có thể di chuyển EBS AZ  to AZ, nhưng trước tiên cần snapshot của nó
- Have a provisioned capacity (size in GB, and IOPS)
  - You get billed for all the provisioned capacity: bạn có thể lấy bill cho tất cả drive
  - You can increase the capacity of the drive over time: bạn có thể tăng dung lượng cho drive theo thời gian
  
- EBS - Delete on termination attribute
- Controls EBS behaviour when EC2 instance terminates
  - By default, the root EBS volume is deleted
2. EBS Snapshots
- Make a backup(Snapshot) of your EBS volume at point of in time: tạo sao lưu của EBS tại mọi thời điểm
- Not necessary to detach volume to do snapshot, but recommended: Không cần thiết tách volumme ra snapshot, nhưng nó được khuyến nghị
- Can copy snapshot across AZ or region, The idea is that you would be able to transfer some of your data in a different region on AWS.
  Có thể copy snapshot trên các AZ hoặc Region, và ý tưởng là bạn có thể chuyển giao dữ liệu giữa các region hoặc AZ
- EBS snapshot features
  - EBS snapshot archive:
    - Move a Snapshot to an "Snapshot archive tier" that is 75% cheaper: Di chuyển snapshot đến "Snapshot archive" sẽ tối ưu 75% chi phí
    - Take within 24 to 72 hour for restoring from archive: Mất 24 đến 72h để phục hồi nố từ "archive"
  - Recycle Bin for EBS snapshot: mục đích là khi xóa snapshot sẽ không xóa ngay mà để nó vào thùng rác có thể phục hồi lại
    - Setup rule to retain deleted snapshot so you can recover them after accidental deletion: Thiết lập quy định là "giữ lại" bản đã xóa trong thùng rác để có thể phục hồi
    - specify retention (from 1 day to 1 year)

3. AMI overview
 - AMI =  Amazon Machine Image
 - AMI are a customization of an EC2 instance 
   - YOu add your own software, configuration, operating system, monitoring...
   - When using AMI => Faster boot/ configuration time because all your software is pre-packaged
   Sử dụng AMI -> sẽ cho thời gian khởi đông / cấu hình nhanh hơn  vì tất cả phần mềm của bạn đã được đóng gói trước
 - AMI are built for a specific region (and can be copied across regions): AMI được xây dựng trên 1 region, nhưng có thể copy đến tất cả các khu vực
 - You can launch EC2 instance from :
   - A public AMI: AWS provided
   - Your own AMI: you make and maintain them yourself
   - An AWS marketplace AMI: an AMI someone else made)
 
 - AMI PROCESS (From an EC2 instance)
   - step1: Start an EC2 instance and customized it
   - step2: stop instance (for dât integrity)
   - step3: build an AMI - This will also create EBS snapshot
   - Launch new instances from other AMI

4. EC2 instance store
- EBS volumes are network drive with good but "limited" performance
- if you need a high-performance hardware-disk, use EC2 instance store
- better input / output performance
- EC2 instance store lose their storage if they are stopped. (When you stop ỏ terminated EC2 instance store, then the storage will be lost)
    bạn sẽ mất EC2 instance store, nếu chung bị dừng lại (Khi dừng hoặc chấm dứt EC2 instance store, thì sau đó lưu trữ sẽ bị mất)
- Using for: good for buffer / cache / scratch data or temporary content
- But not using for: Long term storage (Tuyệt đối không sử dụng cho trường hợp lưu trữ lâu dài) 
- Risk of data loss if hardware fail: Rủ ro về mất dữ liệu nếu phần cứng có lỗi
- Backup and Replication are you responsibility: Sao lưu và tạo bản sao là nhiệm vụ của bạn, để tránh thất thoát



5. EBS volume types:
- EBS Volume come in 6 types:
    - gp2/gp3 (SSD): General purpose SSD volume that balances price and performance for a wide variety of workload:
    Ổ cứng SSD với mục đích chung, cân bằng giữa giá tiền và hiệu suất cho nhiều khối lượng công việc.
    - io1/io2 (SSD): Highest-performance SSD volume for mission-critical low-latency or high-throughput workloads
    Ổ cứng SSD có hiệu suất cao nhất cho nhiệm vụ quan trong, đệ trễ thấp hoặc khối lượng công việc cần thông lượng cao
    - st1 (HDD) low cost HDD volume designed for frequently accessed, throughput-intensive workload:
    ổ cứng HDD chi phí thấp, thiết kế cho khối lượng công việc thường xuyên được truy cập, là thông lượng chuyên sâu
    - sc1 (HDD) Lowest cost HDD volume designed for less frequently accessed workload
    ổ cứng HDD, chi phí thất nhất, thiết kế cho khối lượng công việc ít truy cập
- EBS Volumes are characterized in Size | Throughput | IOPS (operations/second)
- Boot volume is "the disk partition that contains the operating system folder" : phân vùng ổ đía chứa hệ điều hành
5.1 General purpose SSD
- cost effective storage, low latency: lưu trữ có chi phí hiệu quả, có độ trễ thấp
- Use for: system boot volumes, virtual desktop, development and test environment: sử dụng cho : khởi động hệ thống, máy ảo desktop, môi trường test và phát triển
- Size: 1Gb - 1Tb
- gp3: (newer generations of volumes: thế hệ mới hơn so với gp2)
  - Baseline  of 3.000 IOPS and throughput 125 MB/s
  - can increase IOPS up to 16.000 and throughput up to 1000 MB/s independently: Có thể tăng IOPS lên đến 16000 và throughput đến 1000MiB/s một cách độc lập "Nghĩa là 1 volume độc lập"
- gp2: 
  - small gp2 volume can burst IOPS to 3000
  - size of the volume and IOPS are linked, max IOPS is 16.000
  - 3 IOPS/1GB, means at 5.334 GB we are at the max IOPS

5.2 Provisioned IOPS (io1/io2)

- Using for:
  - critical business applications with sustained IOPS performance: Nghiệp vụ quan trong với việc duy trì hiệu suất IOPS
  - Or applications that need more than 16.000 IOPS (more gp3/gp2)
  - great of database workloads (sensitive to storage performance and consistency)
- io1/io2 (4Gib - 16 TiB):
  - Max PIOPS: 64.000 for Nitro EC2 instance & 32.000 for other
  - Can increase PIOPS independently from volume storage size: có thể tăng IOPS độc lập từ kích thước lưu trữ
  - io2 have more durability and more IOPS/GiB (at the same price as io1): có thể tăng độ bền và IOPS/GiB (với mắc giá tương đương io1)
- io2 Block Express (4 GiB - 64 TiB):
  - This gives you sub-millisencond latency: nó cho chúng ta độ chễ tính bằng mini giây
  - MAX PIOPS 256.000 with an 1000 PIOPS / 1Gib
- Support EBS Multiple attach

5.3 Hard Disk Drives (HDD) st1/sc1
- Cannot be boot volume
- Size: 125MiB to 16TiB
- Throughput Optimized HDD (st1)
  - Big data, Data Warehouses, Log Processing: dữ liệu lớn, kho dữ liệu, Xử lý nhật ký
  - max Throughput 500 MiB/s - max IOPS 500
- Cold HDD (sc1):
  - For data that is infrequently accessed: dữ liệu truy cập không thường xuyên 
  - scenarios where lowest cost possible: các tình huống cần chi phí thấp nhất có thể
  - max Throughput 250 MiB/s - max IOPS 250

6. EBS multi-attach - (ONLY io1-io2 Family)
![img_5.png](img_5.png)

- Attach the same EBS volume to multiple EC2 instance in the same AZ: đính kèm EBS volume vào EC2 instance trên cùng AZ
- Each instance has full read & write permission to the volume
- Use Case:
  - Archive higher application availability in clustered linux applications: Lưu trữ tính khả dụng của các úng dụng cao hơn trong các ứng dụng linux đã được phân nhóm (ex: Teradata)
  - Application must manage concurrent write operations: ứng dụng phải đồng thời hoạt động ghi
- Must use a file system that is cluster-aware: phải sử dụng file hệ thống nhận biết cụm